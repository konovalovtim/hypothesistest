<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>A/B Sandbox</title>

    <style>
      body { 
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; 
        display:flex; 
        min-height:100svh; 
        align-items:center; 
        justify-content:center; 
      }

      .card { 
        padding:24px 28px; 
        border:1px solid #eee; 
        border-radius:12px; 
        box-shadow:0 2px 14px rgba(0,0,0,.06); 
        text-align:center; 
      }

      button { 
        font-size:16px; 
        padding:12px 18px; 
        border-radius:10px; 
        border:0; 
        cursor:pointer; 
        transition: background-color 0.3s ease;
      }

      button.red {
        background-color: red;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Тест кнопки для A/B</h1>
      <button id="cta">Жми меня</button>
    </div>
        <!-- Hypotests: эксперимент "cta-green-test" -->
<script>
;(function() {
  var config = Object.assign({
    apiBaseUrl: 'http://localhost:8080',
    experimentKey: 'cta-green-test',
    debug: false,
    platform: 'desktop',
    region: 'ru',
    variants: {
      'control': { allocationPercent: 50, name: 'Control',
        actions: [
        { selector: '#cta', type: 'text', value: 'Получить бонус', property: 'backgroundColor', name: 'href' }
      ], trackEvents: [
        { selector: '#cta', domEvent: 'click', eventType: 'CLICK' }
      ] },
      'variant_green': { allocationPercent: 50, name: 'Green CTA',
        actions: [
        { selector: '#cta', type: 'style', value: '#0FA958', property: 'backgroundColor' }
      ], trackEvents: [
        { selector: '#cta', domEvent: 'click', eventType: 'CLICK' }
      ] }
    }
  }, window.hypotestsConfig || {});

  window.hypotestsConfig = config;

  var bundle = 'LyohIEh5cG90ZXN0cyBTbmlwcGV0IHYwLjIuMCB8IE1JVCBMaWNlbnNlICovCihmdW5jdGlvbiAoKSB7CiAgY29uc3QgVkVSU0lPTiA9ICcwLjIuMCc7CiAgY29uc3QgU1RPUkFHRV9LRVkgPSAnaHlwb3Rlc3RzOnZpc2l0b3JJZCc7CiAgY29uc3QgQ09PS0lFX05BTUUgPSAnaHlwb3Rlc3RzX3ZpZCc7CiAgY29uc3QgQVNTSUdOX0VORFBPSU5UID0gJy9hcGkvdjEvYXNzaWduJzsKICBjb25zdCBFVkVOVF9FTkRQT0lOVCA9ICcvYXBpL3YxL2V2ZW50cyc7CgogIGZ1bmN0aW9uIHJlYWREYXRhc2V0Q29uZmlnKCkgewogICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQogICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdDsKICAgIGlmICghc2NyaXB0IHx8ICFzY3JpcHQuZGF0YXNldCkgewogICAgICByZXR1cm4ge307CiAgICB9CiAgICBjb25zdCBkYXRhc2V0ID0gc2NyaXB0LmRhdGFzZXQ7CiAgICBjb25zdCBjb25maWcgPSB7fTsKICAgIGlmIChkYXRhc2V0LmFwaUJhc2UpIHsKICAgICAgY29uZmlnLmFwaUJhc2VVcmwgPSBkYXRhc2V0LmFwaUJhc2U7CiAgICB9CiAgICBpZiAoZGF0YXNldC5leHBlcmltZW50S2V5KSB7CiAgICAgIGNvbmZpZy5leHBlcmltZW50S2V5ID0gZGF0YXNldC5leHBlcmltZW50S2V5OwogICAgfQogICAgaWYgKGRhdGFzZXQucGxhdGZvcm0pIHsKICAgICAgY29uZmlnLnBsYXRmb3JtID0gZGF0YXNldC5wbGF0Zm9ybTsKICAgIH0KICAgIGlmIChkYXRhc2V0LnJlZ2lvbikgewogICAgICBjb25maWcucmVnaW9uID0gZGF0YXNldC5yZWdpb247CiAgICB9CiAgICBpZiAoZGF0YXNldC5kZWJ1ZykgewogICAgICBjb25maWcuZGVidWcgPSBkYXRhc2V0LmRlYnVnID09PSAndHJ1ZSc7CiAgICB9CiAgICByZXR1cm4gY29uZmlnOwogIH0KCiAgZnVuY3Rpb24gbWVyZ2VDb25maWcoKSB7CiAgICBjb25zdCBkZWZhdWx0cyA9IHsKICAgICAgYXBpQmFzZVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcsCiAgICAgIGFzc2lnbkVuZHBvaW50OiBBU1NJR05fRU5EUE9JTlQsCiAgICAgIGV2ZW50RW5kcG9pbnQ6IEVWRU5UX0VORFBPSU5ULAogICAgICBkZWJ1ZzogZmFsc2UsCiAgICAgIHZhcmlhbnRzOiB7fSwKICAgIH07CiAgICBjb25zdCBnbG9iYWxDb25maWcgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHdpbmRvdy5oeXBvdGVzdHNDb25maWcgfHwgd2luZG93Ll9faHlwb3Rlc3RzQ29uZmlnKSkgfHwge307CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMsIGdsb2JhbENvbmZpZywgcmVhZERhdGFzZXRDb25maWcoKSk7CiAgfQoKICBmdW5jdGlvbiBkZWJ1Z0xvZyhjb25maWcsIC4uLmFyZ3MpIHsKICAgIGlmIChjb25maWcuZGVidWcgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgIGNvbnNvbGUubG9nKCdbSHlwb3Rlc3RzXScsIC4uLmFyZ3MpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gd2FybiguLi5hcmdzKSB7CiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUud2FybikgewogICAgICBjb25zb2xlLndhcm4oJ1tIeXBvdGVzdHNdJywgLi4uYXJncyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiByZWFkQ29va2llKG5hbWUpIHsKICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnIHx8ICFkb2N1bWVudC5jb29raWUpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBjb25zdCBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpOwogICAgZm9yIChjb25zdCBlbnRyeSBvZiBjb29raWVzKSB7CiAgICAgIGNvbnN0IFtyYXdLZXksIC4uLnJhd1ZhbHVlXSA9IGVudHJ5LnNwbGl0KCc9Jyk7CiAgICAgIGlmIChkZWNvZGVVUklDb21wb25lbnQocmF3S2V5KSA9PT0gbmFtZSkgewogICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmF3VmFsdWUuam9pbignPScpKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICBmdW5jdGlvbiB3cml0ZUNvb2tpZShuYW1lLCB2YWx1ZSkgewogICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgZXhwaXJlcyA9IG5ldyBEYXRlKERhdGUubm93KCkgKyAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b1VUQ1N0cmluZygpOwogICAgZG9jdW1lbnQuY29va2llID0gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9OyBwYXRoPS87IGV4cGlyZXM9JHtleHBpcmVzfTsgU2FtZVNpdGU9TGF4YDsKICB9CgogIGZ1bmN0aW9uIHJlYWRTdG9yYWdlKGtleSkgewogICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgdHJ5IHsKICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB3cml0ZVN0b3JhZ2Uoa2V5LCB2YWx1ZSkgewogICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRyeSB7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIC8qIGlnbm9yZSAqLwogICAgfQogIH0KCiAgZnVuY3Rpb24gcmFuZG9tSWQoKSB7CiAgICBpZiAodHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLnJhbmRvbVVVSUQpIHsKICAgICAgcmV0dXJuIGNyeXB0by5yYW5kb21VVUlEKCk7CiAgICB9CiAgICBjb25zdCBzdWZmaXggPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyKTsKICAgIHJldHVybiBgJHtEYXRlLm5vdygpLnRvU3RyaW5nKDE2KX0tJHtzdWZmaXh9YDsKICB9CgogIGZ1bmN0aW9uIHJlc29sdmVWaXNpdG9ySWQoKSB7CiAgICBsZXQgaWQgPSByZWFkU3RvcmFnZShTVE9SQUdFX0tFWSk7CiAgICBpZiAoaWQpIHsKICAgICAgcmV0dXJuIGlkOwogICAgfQogICAgaWQgPSByZWFkQ29va2llKENPT0tJRV9OQU1FKTsKICAgIGlmIChpZCkgewogICAgICB3cml0ZVN0b3JhZ2UoU1RPUkFHRV9LRVksIGlkKTsKICAgICAgcmV0dXJuIGlkOwogICAgfQogICAgaWQgPSByYW5kb21JZCgpOwogICAgd3JpdGVTdG9yYWdlKFNUT1JBR0VfS0VZLCBpZCk7CiAgICB3cml0ZUNvb2tpZShDT09LSUVfTkFNRSwgaWQpOwogICAgcmV0dXJuIGlkOwogIH0KCiAgZnVuY3Rpb24gZGV0ZWN0UGxhdGZvcm0oKSB7CiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuICdkZXNrdG9wJzsKICAgIH0KICAgIHJldHVybiAvTW9iaXxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50IHx8ICcnKSA/ICdtb2JpbGUnIDogJ2Rlc2t0b3AnOwogIH0KCiAgZnVuY3Rpb24gcmVzb2x2ZVVybChiYXNlLCBwYXRoKSB7CiAgICBpZiAoIXBhdGgpIHsKICAgICAgcmV0dXJuIGJhc2U7CiAgICB9CiAgICBpZiAoL15odHRwcz86XC9cLy9pLnRlc3QocGF0aCkpIHsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9CiAgICBpZiAoIWJhc2UpIHsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9CiAgICB0cnkgewogICAgICByZXR1cm4gbmV3IFVSTChwYXRoLCBiYXNlKS50b1N0cmluZygpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc3QgYmFzZUVuZHNXaXRoU2xhc2ggPSBiYXNlLmVuZHNXaXRoKCcvJyk7CiAgICAgIGNvbnN0IHBhdGhTdGFydHNXaXRoU2xhc2ggPSBwYXRoLnN0YXJ0c1dpdGgoJy8nKTsKICAgICAgaWYgKGJhc2VFbmRzV2l0aFNsYXNoICYmIHBhdGhTdGFydHNXaXRoU2xhc2gpIHsKICAgICAgICByZXR1cm4gYmFzZSArIHBhdGguc2xpY2UoMSk7CiAgICAgIH0KICAgICAgaWYgKCFiYXNlRW5kc1dpdGhTbGFzaCAmJiAhcGF0aFN0YXJ0c1dpdGhTbGFzaCkgewogICAgICAgIHJldHVybiBgJHtiYXNlfS8ke3BhdGh9YDsKICAgICAgfQogICAgICByZXR1cm4gYmFzZSArIHBhdGg7CiAgICB9CiAgfQoKICBhc3luYyBmdW5jdGlvbiByZXF1ZXN0QXNzaWdubWVudChjb25maWcsIHZpc2l0b3JJZCwgcGxhdGZvcm0sIHJlZ2lvbikgewogICAgY29uc3QgdXJsID0gcmVzb2x2ZVVybChjb25maWcuYXBpQmFzZVVybCwgY29uZmlnLmFzc2lnbkVuZHBvaW50KTsKICAgIGNvbnN0IGJvZHkgPSB7CiAgICAgIGV4cGVyaW1lbnRLZXk6IGNvbmZpZy5leHBlcmltZW50S2V5LAogICAgICB2aXNpdG9ySWQsCiAgICAgIHBsYXRmb3JtLAogICAgICByZWdpb24sCiAgICB9OwogICAgZGVidWdMb2coY29uZmlnLCAnUmVxdWVzdCBhc3NpZ25tZW50JywgYm9keSwgdXJsKTsKICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7CiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwKICAgICAga2VlcGFsaXZlOiB0cnVlLAogICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSwKICAgIH0pOwogICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoYEFzc2lnbm1lbnQgZmFpbGVkIHdpdGggc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfWApOwogICAgfQogICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGRlYnVnTG9nKGNvbmZpZywgJ1JlY2VpdmVkIGFzc2lnbm1lbnQnLCBwYXlsb2FkKTsKICAgIHJldHVybiBwYXlsb2FkOwogIH0KCiAgZnVuY3Rpb24gdG9UcmFja2VkRXZlbnRzKGNvbmZpZ1ZhcmlhbnQpIHsKICAgIGlmICghY29uZmlnVmFyaWFudCkgewogICAgICByZXR1cm4gW107CiAgICB9CiAgICBpZiAoQXJyYXkuaXNBcnJheShjb25maWdWYXJpYW50LnRyYWNrRXZlbnRzKSkgewogICAgICByZXR1cm4gY29uZmlnVmFyaWFudC50cmFja0V2ZW50czsKICAgIH0KICAgIGlmIChBcnJheS5pc0FycmF5KGNvbmZpZ1ZhcmlhbnQudHJhY2tDbGlja3MpKSB7CiAgICAgIHJldHVybiBjb25maWdWYXJpYW50LnRyYWNrQ2xpY2tzLm1hcCgoc2VsZWN0b3IpID0+ICh7CiAgICAgICAgc2VsZWN0b3IsCiAgICAgICAgZG9tRXZlbnQ6ICdjbGljaycsCiAgICAgICAgZXZlbnRUeXBlOiAnQ0xJQ0snLAogICAgICB9KSk7CiAgICB9CiAgICByZXR1cm4gW107CiAgfQoKICBmdW5jdGlvbiBzZW5kRXZlbnQoY29uZmlnLCBhc3NpZ25tZW50LCB2aXNpdG9ySWQsIGV2ZW50VHlwZSwgZXh0cmEpIHsKICAgIGNvbnN0IHVybCA9IHJlc29sdmVVcmwoY29uZmlnLmFwaUJhc2VVcmwsIGNvbmZpZy5ldmVudEVuZHBvaW50KTsKICAgIGNvbnN0IHBheWxvYWQgPSBPYmplY3QuYXNzaWduKAogICAgICAgIHsKICAgICAgICAgIGV4cGVyaW1lbnRLZXk6IGFzc2lnbm1lbnQuZXhwZXJpbWVudEtleSwKICAgICAgICAgIHZhcmlhbnRLZXk6IGFzc2lnbm1lbnQudmFyaWFudEtleSwKICAgICAgICAgIHZpc2l0b3JJZCwKICAgICAgICAgIGV2ZW50VHlwZSwKICAgICAgICAgIHVzZXJBZ2VudDogdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgPyBuYXZpZ2F0b3IudXNlckFnZW50IDogdW5kZWZpbmVkLAogICAgICAgICAgcmVnaW9uOiBjb25maWcucmVnaW9uLAogICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgfSwKICAgICAgICBleHRyYSB8fCB7fQogICAgKTsKICAgIGRlYnVnTG9nKGNvbmZpZywgJ1NlbmQgZXZlbnQnLCBwYXlsb2FkLCB1cmwpOwogICAgY29uc3Qgc2VyaWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpOwogICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci5zZW5kQmVhY29uKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtzZXJpYWxpemVkXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7CiAgICAgICAgbmF2aWdhdG9yLnNlbmRCZWFjb24odXJsLCBibG9iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgd2Fybignc2VuZEJlYWNvbiBmYWlsZWQsIGZhbGxiYWNrIHRvIGZldGNoJywgZXJyb3IpOwogICAgICB9CiAgICB9CiAgICBmZXRjaCh1cmwsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LAogICAgICBrZWVwYWxpdmU6IHRydWUsCiAgICAgIGJvZHk6IHNlcmlhbGl6ZWQsCiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHdhcm4oJ0ZldGNoIGV2ZW50IGZhaWxlZCcsIGVycm9yKSk7CiAgfQoKICBmdW5jdGlvbiBhcHBseUFjdGlvbnMoY29uZmlnLCBhY3Rpb25zLCB2YXJpYW50S2V5KSB7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYWN0aW9ucykpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgYWN0aW9ucy5mb3JFYWNoKChhY3Rpb24pID0+IHsKICAgICAgaWYgKCFhY3Rpb24gfHwgIWFjdGlvbi5zZWxlY3RvcikgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhY3Rpb24uc2VsZWN0b3IpOwogICAgICBpZiAoIWVsZW1lbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc3dpdGNoIChhY3Rpb24udHlwZSkgewogICAgICAgIGNhc2UgJ3RleHQnOgogICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGFjdGlvbi52YWx1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2h0bWwnOgogICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBhY3Rpb24udmFsdWU7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdhdHRyaWJ1dGUnOgogICAgICAgICAgaWYgKGFjdGlvbi5uYW1lKSB7CiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGFjdGlvbi5uYW1lLCBhY3Rpb24udmFsdWUpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnc3R5bGUnOgogICAgICAgICAgaWYgKGFjdGlvbi5wcm9wZXJ0eSkgewogICAgICAgICAgICBlbGVtZW50LnN0eWxlW2FjdGlvbi5wcm9wZXJ0eV0gPSBhY3Rpb24udmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdjbGFzczphZGQnOgogICAgICAgICAgaWYgKGFjdGlvbi52YWx1ZSkgewogICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYWN0aW9uLnZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2NsYXNzOnJlbW92ZSc6CiAgICAgICAgICBpZiAoYWN0aW9uLnZhbHVlKSB7CiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShhY3Rpb24udmFsdWUpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHdhcm4oJ1Vua25vd24gYWN0aW9uIHR5cGUnLCBhY3Rpb24sIHZhcmlhbnRLZXkpOwogICAgICB9CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGF0dGFjaFRyYWNrZWRFdmVudHMoY29uZmlnLCBldmVudHMsIGFzc2lnbm1lbnQsIHZpc2l0b3JJZCwgcmVnaXN0cnkpIHsKICAgIGlmICghQXJyYXkuaXNBcnJheShldmVudHMpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGV2ZW50cy5mb3JFYWNoKChldmVudENvbmZpZykgPT4gewogICAgICBpZiAoIWV2ZW50Q29uZmlnIHx8ICFldmVudENvbmZpZy5zZWxlY3RvcikgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihldmVudENvbmZpZy5zZWxlY3Rvcik7CiAgICAgIGlmICghZWxlbWVudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBkb21FdmVudCA9IChldmVudENvbmZpZy5kb21FdmVudCB8fCAnY2xpY2snKS50b0xvd2VyQ2FzZSgpOwogICAgICBjb25zdCBidXNpbmVzc0V2ZW50ID0gKGV2ZW50Q29uZmlnLmV2ZW50VHlwZSB8fCAnQ0xJQ0snKS50b1VwcGVyQ2FzZSgpOwogICAgICBjb25zdCBoYW5kbGVyID0gKCkgPT4gc2VuZEV2ZW50KGNvbmZpZywgYXNzaWdubWVudCwgdmlzaXRvcklkLCBidXNpbmVzc0V2ZW50KTsKICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGRvbUV2ZW50LCBoYW5kbGVyKTsKICAgICAgcmVnaXN0cnkucHVzaCgoKSA9PiBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9tRXZlbnQsIGhhbmRsZXIpKTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gZG9tUmVhZHkoY2FsbGJhY2spIHsKICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGNhbGxiYWNrLCB7IG9uY2U6IHRydWUgfSk7CiAgICB9IGVsc2UgewogICAgICBjYWxsYmFjaygpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZGV0ZWN0UmVnaW9uKGNvbmZpZykgewogICAgaWYgKGNvbmZpZy5yZWdpb24pIHsKICAgICAgcmV0dXJuIGNvbmZpZy5yZWdpb247CiAgICB9CiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQogICAgY29uc3QgbWV0YSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ21ldGFbbmFtZT1cImh5cG90ZXN0cy1yZWdpb25cIl0nKTsKICAgIHJldHVybiBtZXRhICYmIG1ldGEuY29udGVudCA/IG1ldGEuY29udGVudCA6IHVuZGVmaW5lZDsKICB9CgogIGZ1bmN0aW9uIGJ1aWxkUHVibGljQXBpKHN0YXRlLCBjb25maWcsIHZpc2l0b3JJZCwgcGxhdGZvcm0sIHJlZ2lvbikgewogICAgcmV0dXJuIHsKICAgICAgdmVyc2lvbjogVkVSU0lPTiwKICAgICAgdmlzaXRvcklkLAogICAgICBnZXQgYXNzaWdubWVudCgpIHsKICAgICAgICByZXR1cm4gc3RhdGUuYXNzaWdubWVudDsKICAgICAgfSwKICAgICAgYXN5bmMgcmVzZXRBc3NpZ25tZW50KCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBzdGF0ZS5hc3NpZ25tZW50ID0gYXdhaXQgcmVxdWVzdEFzc2lnbm1lbnQoY29uZmlnLCB2aXNpdG9ySWQsIHBsYXRmb3JtLCByZWdpb24pOwogICAgICAgICAgZGVidWdMb2coY29uZmlnLCAnQXNzaWdubWVudCByZWZyZXNoZWQnLCBzdGF0ZS5hc3NpZ25tZW50KTsKICAgICAgICAgIGFwcGx5VmFyaWFudChzdGF0ZSwgY29uZmlnLCB2aXNpdG9ySWQpOwogICAgICAgICAgc2VuZEV2ZW50KGNvbmZpZywgc3RhdGUuYXNzaWdubWVudCwgdmlzaXRvcklkLCAnSU1QUkVTU0lPTicpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICB3YXJuKCdGYWlsZWQgdG8gcmVhc3NpZ24gdmFyaWFudCcsIGVycm9yKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRyYWNrQ29udmVyc2lvbihleHRyYSkgewogICAgICAgIGlmICghc3RhdGUuYXNzaWdubWVudCkgewogICAgICAgICAgd2FybignQ29udmVyc2lvbiBpZ25vcmVkLCBubyBhc3NpZ25tZW50IHlldCcpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBzZW5kRXZlbnQoY29uZmlnLCBzdGF0ZS5hc3NpZ25tZW50LCB2aXNpdG9ySWQsICdDT05WRVJTSU9OJywgZXh0cmEpOwogICAgICB9LAogICAgfTsKICB9CgogIGZ1bmN0aW9uIGFwcGx5VmFyaWFudChzdGF0ZSwgY29uZmlnLCB2aXNpdG9ySWQpIHsKICAgIGRvbVJlYWR5KCgpID0+IHsKICAgICAgaWYgKCFzdGF0ZS5hc3NpZ25tZW50KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IHZhcmlhbnRDb25maWcgPSAoY29uZmlnLnZhcmlhbnRzICYmIGNvbmZpZy52YXJpYW50c1tzdGF0ZS5hc3NpZ25tZW50LnZhcmlhbnRLZXldKSB8fCB7fTsKICAgICAgY29uc3QgdHJhY2tlZEV2ZW50cyA9IHRvVHJhY2tlZEV2ZW50cyh2YXJpYW50Q29uZmlnKTsKICAgICAgaWYgKHN0YXRlLmRldGFjaExpc3RlbmVycy5sZW5ndGgpIHsKICAgICAgICBzdGF0ZS5kZXRhY2hMaXN0ZW5lcnMuZm9yRWFjaCgoZm4pID0+IGZuKCkpOwogICAgICAgIHN0YXRlLmRldGFjaExpc3RlbmVycyA9IFtdOwogICAgICB9CiAgICAgIGFwcGx5QWN0aW9ucyhjb25maWcsIHZhcmlhbnRDb25maWcuYWN0aW9ucywgc3RhdGUuYXNzaWdubWVudC52YXJpYW50S2V5KTsKICAgICAgYXR0YWNoVHJhY2tlZEV2ZW50cyhjb25maWcsIHRyYWNrZWRFdmVudHMsIHN0YXRlLmFzc2lnbm1lbnQsIHZpc2l0b3JJZCwgc3RhdGUuZGV0YWNoTGlzdGVuZXJzKTsKICAgICAgaWYgKHR5cGVvZiB2YXJpYW50Q29uZmlnLm9uQXBwbGllZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHRyeSB7CiAgICAgICAgICB2YXJpYW50Q29uZmlnLm9uQXBwbGllZChzdGF0ZS5hc3NpZ25tZW50LCBjb25maWcsIHZpc2l0b3JJZCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHdhcm4oJ1ZhcmlhbnQgb25BcHBsaWVkIHRocmV3IGFuIGVycm9yJywgZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfQoKICBhc3luYyBmdW5jdGlvbiBib290c3RyYXAoKSB7CiAgICBjb25zdCBjb25maWcgPSBtZXJnZUNvbmZpZygpOwogICAgaWYgKCFjb25maWcuZXhwZXJpbWVudEtleSkgewogICAgICB3YXJuKCdleHBlcmltZW50S2V5IGlzIG5vdCBjb25maWd1cmVkJyk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCB2aXNpdG9ySWQgPSByZXNvbHZlVmlzaXRvcklkKCk7CiAgICBjb25zdCBwbGF0Zm9ybSA9IGNvbmZpZy5wbGF0Zm9ybSB8fCBkZXRlY3RQbGF0Zm9ybSgpOwogICAgY29uc3QgcmVnaW9uID0gZGV0ZWN0UmVnaW9uKGNvbmZpZyk7CiAgICBjb25maWcucGxhdGZvcm0gPSBwbGF0Zm9ybTsKICAgIGlmIChyZWdpb24pIHsKICAgICAgY29uZmlnLnJlZ2lvbiA9IHJlZ2lvbjsKICAgIH0KCiAgICBjb25zdCBzdGF0ZSA9IHsKICAgICAgYXNzaWdubWVudDogbnVsbCwKICAgICAgZGV0YWNoTGlzdGVuZXJzOiBbXSwKICAgIH07CgogICAgY29uc3QgcHVibGljQXBpID0gYnVpbGRQdWJsaWNBcGkoc3RhdGUsIGNvbmZpZywgdmlzaXRvcklkLCBwbGF0Zm9ybSwgcmVnaW9uKTsKICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgewogICAgICB3aW5kb3cuaHlwb3Rlc3RzID0gcHVibGljQXBpOwogICAgfQoKICAgIHRyeSB7CiAgICAgIHN0YXRlLmFzc2lnbm1lbnQgPSBhd2FpdCByZXF1ZXN0QXNzaWdubWVudChjb25maWcsIHZpc2l0b3JJZCwgcGxhdGZvcm0sIHJlZ2lvbik7CiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBBcnJheS5pc0FycmF5KHdpbmRvdy5kYXRhTGF5ZXIpKSB7CiAgICAgICAgd2luZG93LmRhdGFMYXllci5wdXNoKHsKICAgICAgICAgIGV2ZW50OiAnaHlwb3Rlc3RzX2Fzc2lnbm1lbnQnLAogICAgICAgICAgZXhwZXJpbWVudEtleTogc3RhdGUuYXNzaWdubWVudC5leHBlcmltZW50S2V5LAogICAgICAgICAgdmFyaWFudEtleTogc3RhdGUuYXNzaWdubWVudC52YXJpYW50S2V5LAogICAgICAgIH0pOwogICAgICB9CiAgICAgIGFwcGx5VmFyaWFudChzdGF0ZSwgY29uZmlnLCB2aXNpdG9ySWQpOwogICAgICBzZW5kRXZlbnQoY29uZmlnLCBzdGF0ZS5hc3NpZ25tZW50LCB2aXNpdG9ySWQsICdJTVBSRVNTSU9OJyk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICB3YXJuKCdGYWlsZWQgdG8gYXNzaWduIHZhcmlhbnQnLCBlcnJvcik7CiAgICB9CiAgfQoKICBib290c3RyYXAoKTsKfSkoKTsK';
  var decode = typeof window !== 'undefined' && window.atob ? window.atob : (typeof atob === 'function' ? atob : null);
  if (!decode) { throw new Error('Base64 decoder is not available in this environment'); }
  var decoded = decode(bundle);
  (new Function(decoded))();
})();
</script>
    <script>
      const btn = document.getElementById('cta');
      btn.addEventListener('click', () => {
        btn.classList.toggle('red');
      });
    </script>
   </body>
</html>
