<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>A/B Sandbox</title>

    <style>
      body { 
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; 
        display:flex; 
        min-height:100svh; 
        align-items:center; 
        justify-content:center; 
      }

      .card { 
        padding:24px 28px; 
        border:1px solid #eee; 
        border-radius:12px; 
        box-shadow:0 2px 14px rgba(0,0,0,.06); 
        text-align:center; 
      }

      button { 
        font-size:16px; 
        padding:12px 18px; 
        border-radius:10px; 
        border:0; 
        cursor:pointer; 
        transition: background-color 0.3s ease;
      }

      button.red {
        background-color: red;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Тест кнопки для A/B</h1>
      <button id="cta">Жми меня</button>
    </div>
        <!-- Hypotests: эксперимент "Тест CTA на главной" -->
<script>
;(function() {
  // Окно проведения эксперимента: с 2025-09-20T08:00:00Z по 2025-10-20T08:00:00Z
  var config = Object.assign({
    apiBaseUrl: 'http://localhost:8080',
    experimentId: 'fd5c565d-1ad2-4c7a-a562-b891c9a5abca',
    experimentName: 'Тест CTA на главной',
    debug: false,
    platform: 'desktop',
    region: 'eu',
    variants: {
      'c85e6bd7-9c37-4082-9b88-105bc69f0b78': { allocationPercent: 50, name: 'A',
        actions: [
        { selector: '#cta', type: 'text', value: 'Получить бонус', property: 'backgroundColor', name: 'href' }
      ], trackEvents: [
        { selector: '#cta', domEvent: 'click', eventType: 'CLICK' }
      ] },
      'c2aca467-09dc-4629-b10e-f746c0704983': { allocationPercent: 50, name: 'B',
        actions: [
        { selector: '#cta', type: 'style', value: '#0FA958', property: 'backgroundColor' }
      ], trackEvents: [
        { selector: '#cta', domEvent: 'click', eventType: 'CLICK' }
      ] }
    }
  }, window.hypotestsConfig || {});

  window.hypotestsConfig = config;

  var bundle = 'LyohIEh5cG90ZXN0cyBTbmlwcGV0IHYwLjIuMCB8IE1JVCBMaWNlbnNlICovCihmdW5jdGlvbiAoKSB7CiAgY29uc3QgVkVSU0lPTiA9ICcwLjIuMCc7CiAgY29uc3QgU1RPUkFHRV9LRVkgPSAnaHlwb3Rlc3RzOnZpc2l0b3JJZCc7CiAgY29uc3QgQ09PS0lFX05BTUUgPSAnaHlwb3Rlc3RzX3ZpZCc7CiAgY29uc3QgQVNTSUdOX0VORFBPSU5UID0gJy9hcGkvdjEvYXNzaWduJzsKICBjb25zdCBFVkVOVF9FTkRQT0lOVCA9ICcvYXBpL3YxL2V2ZW50cyc7CgogIGZ1bmN0aW9uIHJlYWREYXRhc2V0Q29uZmlnKCkgewogICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfQogICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdDsKICAgIGlmICghc2NyaXB0IHx8ICFzY3JpcHQuZGF0YXNldCkgewogICAgICByZXR1cm4ge307CiAgICB9CiAgICBjb25zdCBkYXRhc2V0ID0gc2NyaXB0LmRhdGFzZXQ7CiAgICBjb25zdCBjb25maWcgPSB7fTsKICAgIGlmIChkYXRhc2V0LmFwaUJhc2UpIHsKICAgICAgY29uZmlnLmFwaUJhc2VVcmwgPSBkYXRhc2V0LmFwaUJhc2U7CiAgICB9CiAgICBpZiAoZGF0YXNldC5leHBlcmltZW50SWQpIHsKICAgICAgY29uZmlnLmV4cGVyaW1lbnRJZCA9IGRhdGFzZXQuZXhwZXJpbWVudElkOwogICAgfQogICAgaWYgKGRhdGFzZXQucGxhdGZvcm0pIHsKICAgICAgY29uZmlnLnBsYXRmb3JtID0gZGF0YXNldC5wbGF0Zm9ybTsKICAgIH0KICAgIGlmIChkYXRhc2V0LnJlZ2lvbikgewogICAgICBjb25maWcucmVnaW9uID0gZGF0YXNldC5yZWdpb247CiAgICB9CiAgICBpZiAoZGF0YXNldC5kZWJ1ZykgewogICAgICBjb25maWcuZGVidWcgPSBkYXRhc2V0LmRlYnVnID09PSAndHJ1ZSc7CiAgICB9CiAgICByZXR1cm4gY29uZmlnOwogIH0KCiAgZnVuY3Rpb24gbWVyZ2VDb25maWcoKSB7CiAgICBjb25zdCBkZWZhdWx0cyA9IHsKICAgICAgYXBpQmFzZVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcsCiAgICAgIGFzc2lnbkVuZHBvaW50OiBBU1NJR05fRU5EUE9JTlQsCiAgICAgIGV2ZW50RW5kcG9pbnQ6IEVWRU5UX0VORFBPSU5ULAogICAgICBkZWJ1ZzogZmFsc2UsCiAgICAgIHZhcmlhbnRzOiB7fSwKICAgIH07CiAgICBjb25zdCBnbG9iYWxDb25maWcgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgKHdpbmRvdy5oeXBvdGVzdHNDb25maWcgfHwgd2luZG93Ll9faHlwb3Rlc3RzQ29uZmlnKSkgfHwge307CiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMsIGdsb2JhbENvbmZpZywgcmVhZERhdGFzZXRDb25maWcoKSk7CiAgfQoKICBmdW5jdGlvbiBkZWJ1Z0xvZyhjb25maWcsIC4uLmFyZ3MpIHsKICAgIGlmIChjb25maWcuZGVidWcgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgIGNvbnNvbGUubG9nKCdbSHlwb3Rlc3RzXScsIC4uLmFyZ3MpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gd2FybiguLi5hcmdzKSB7CiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUud2FybikgewogICAgICBjb25zb2xlLndhcm4oJ1tIeXBvdGVzdHNdJywgLi4uYXJncyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiByZWFkQ29va2llKG5hbWUpIHsKICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnIHx8ICFkb2N1bWVudC5jb29raWUpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICBjb25zdCBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7ICcpOwogICAgZm9yIChjb25zdCBlbnRyeSBvZiBjb29raWVzKSB7CiAgICAgIGNvbnN0IFtyYXdLZXksIC4uLnJhd1ZhbHVlXSA9IGVudHJ5LnNwbGl0KCc9Jyk7CiAgICAgIGlmIChkZWNvZGVVUklDb21wb25lbnQocmF3S2V5KSA9PT0gbmFtZSkgewogICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmF3VmFsdWUuam9pbignPScpKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQoKICBmdW5jdGlvbiB3cml0ZUNvb2tpZShuYW1lLCB2YWx1ZSkgewogICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgZXhwaXJlcyA9IG5ldyBEYXRlKERhdGUubm93KCkgKyAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b1VUQ1N0cmluZygpOwogICAgZG9jdW1lbnQuY29va2llID0gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9OyBwYXRoPS87IGV4cGlyZXM9JHtleHBpcmVzfTsgU2FtZVNpdGU9TGF4YDsKICB9CgogIGZ1bmN0aW9uIHJlYWRTdG9yYWdlKGtleSkgewogICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgdHJ5IHsKICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB3cml0ZVN0b3JhZ2Uoa2V5LCB2YWx1ZSkgewogICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRyeSB7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIC8qIGlnbm9yZSAqLwogICAgfQogIH0KCiAgZnVuY3Rpb24gcmFuZG9tSWQoKSB7CiAgICBpZiAodHlwZW9mIGNyeXB0byAhPT0gJ3VuZGVmaW5lZCcgJiYgY3J5cHRvLnJhbmRvbVVVSUQpIHsKICAgICAgcmV0dXJuIGNyeXB0by5yYW5kb21VVUlEKCk7CiAgICB9CiAgICBjb25zdCBzdWZmaXggPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KS5zbGljZSgyKTsKICAgIHJldHVybiBgJHtEYXRlLm5vdygpLnRvU3RyaW5nKDE2KX0tJHtzdWZmaXh9YDsKICB9CgogIGZ1bmN0aW9uIHJlc29sdmVWaXNpdG9ySWQoKSB7CiAgICBsZXQgaWQgPSByZWFkU3RvcmFnZShTVE9SQUdFX0tFWSk7CiAgICBpZiAoaWQpIHsKICAgICAgcmV0dXJuIGlkOwogICAgfQogICAgaWQgPSByZWFkQ29va2llKENPT0tJRV9OQU1FKTsKICAgIGlmIChpZCkgewogICAgICB3cml0ZVN0b3JhZ2UoU1RPUkFHRV9LRVksIGlkKTsKICAgICAgcmV0dXJuIGlkOwogICAgfQogICAgaWQgPSByYW5kb21JZCgpOwogICAgd3JpdGVTdG9yYWdlKFNUT1JBR0VfS0VZLCBpZCk7CiAgICB3cml0ZUNvb2tpZShDT09LSUVfTkFNRSwgaWQpOwogICAgcmV0dXJuIGlkOwogIH0KCiAgZnVuY3Rpb24gZGV0ZWN0UGxhdGZvcm0oKSB7CiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuICdkZXNrdG9wJzsKICAgIH0KICAgIHJldHVybiAvTW9iaXxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50IHx8ICcnKSA/ICdtb2JpbGUnIDogJ2Rlc2t0b3AnOwogIH0KCiAgZnVuY3Rpb24gcmVzb2x2ZVVybChiYXNlLCBwYXRoKSB7CiAgICBpZiAoIXBhdGgpIHsKICAgICAgcmV0dXJuIGJhc2U7CiAgICB9CiAgICBpZiAoL15odHRwcz86XC9cLy9pLnRlc3QocGF0aCkpIHsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9CiAgICBpZiAoIWJhc2UpIHsKICAgICAgcmV0dXJuIHBhdGg7CiAgICB9CiAgICB0cnkgewogICAgICByZXR1cm4gbmV3IFVSTChwYXRoLCBiYXNlKS50b1N0cmluZygpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc3QgYmFzZUVuZHNXaXRoU2xhc2ggPSBiYXNlLmVuZHNXaXRoKCcvJyk7CiAgICAgIGNvbnN0IHBhdGhTdGFydHNXaXRoU2xhc2ggPSBwYXRoLnN0YXJ0c1dpdGgoJy8nKTsKICAgICAgaWYgKGJhc2VFbmRzV2l0aFNsYXNoICYmIHBhdGhTdGFydHNXaXRoU2xhc2gpIHsKICAgICAgICByZXR1cm4gYmFzZSArIHBhdGguc2xpY2UoMSk7CiAgICAgIH0KICAgICAgaWYgKCFiYXNlRW5kc1dpdGhTbGFzaCAmJiAhcGF0aFN0YXJ0c1dpdGhTbGFzaCkgewogICAgICAgIHJldHVybiBgJHtiYXNlfS8ke3BhdGh9YDsKICAgICAgfQogICAgICByZXR1cm4gYmFzZSArIHBhdGg7CiAgICB9CiAgfQoKICBhc3luYyBmdW5jdGlvbiByZXF1ZXN0QXNzaWdubWVudChjb25maWcsIHZpc2l0b3JJZCwgcGxhdGZvcm0sIHJlZ2lvbikgewogICAgY29uc3QgdXJsID0gcmVzb2x2ZVVybChjb25maWcuYXBpQmFzZVVybCwgY29uZmlnLmFzc2lnbkVuZHBvaW50KTsKICAgIGNvbnN0IGJvZHkgPSB7CiAgICAgIGV4cGVyaW1lbnRJZDogY29uZmlnLmV4cGVyaW1lbnRJZCwKICAgICAgdmlzaXRvcklkLAogICAgICBwbGF0Zm9ybSwKICAgICAgcmVnaW9uLAogICAgfTsKICAgIGRlYnVnTG9nKGNvbmZpZywgJ1JlcXVlc3QgYXNzaWdubWVudCcsIGJvZHksIHVybCk7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwgewogICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sCiAgICAgIGtlZXBhbGl2ZTogdHJ1ZSwKICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSksCiAgICB9KTsKICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBBc3NpZ25tZW50IGZhaWxlZCB3aXRoIHN0YXR1cyAke3Jlc3BvbnNlLnN0YXR1c31gKTsKICAgIH0KICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICBkZWJ1Z0xvZyhjb25maWcsICdSZWNlaXZlZCBhc3NpZ25tZW50JywgcGF5bG9hZCk7CiAgICByZXR1cm4gcGF5bG9hZDsKICB9CgogIGZ1bmN0aW9uIHRvVHJhY2tlZEV2ZW50cyhjb25maWdWYXJpYW50KSB7CiAgICBpZiAoIWNvbmZpZ1ZhcmlhbnQpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgaWYgKEFycmF5LmlzQXJyYXkoY29uZmlnVmFyaWFudC50cmFja0V2ZW50cykpIHsKICAgICAgcmV0dXJuIGNvbmZpZ1ZhcmlhbnQudHJhY2tFdmVudHM7CiAgICB9CiAgICBpZiAoQXJyYXkuaXNBcnJheShjb25maWdWYXJpYW50LnRyYWNrQ2xpY2tzKSkgewogICAgICByZXR1cm4gY29uZmlnVmFyaWFudC50cmFja0NsaWNrcy5tYXAoKHNlbGVjdG9yKSA9PiAoewogICAgICAgIHNlbGVjdG9yLAogICAgICAgIGRvbUV2ZW50OiAnY2xpY2snLAogICAgICAgIGV2ZW50VHlwZTogJ0NMSUNLJywKICAgICAgfSkpOwogICAgfQogICAgcmV0dXJuIFtdOwogIH0KCiAgZnVuY3Rpb24gc2VuZEV2ZW50KGNvbmZpZywgYXNzaWdubWVudCwgdmlzaXRvcklkLCBldmVudFR5cGUsIGV4dHJhKSB7CiAgICBjb25zdCB1cmwgPSByZXNvbHZlVXJsKGNvbmZpZy5hcGlCYXNlVXJsLCBjb25maWcuZXZlbnRFbmRwb2ludCk7CiAgICBjb25zdCBwYXlsb2FkID0gT2JqZWN0LmFzc2lnbigKICAgICAgICB7CiAgICAgICAgICBleHBlcmltZW50SWQ6IGFzc2lnbm1lbnQuZXhwZXJpbWVudElkLAogICAgICAgICAgdmFyaWFudElkOiBhc3NpZ25tZW50LnZhcmlhbnRJZCwKICAgICAgICAgIHZpc2l0b3JJZCwKICAgICAgICAgIGV2ZW50VHlwZSwKICAgICAgICAgIHVzZXJBZ2VudDogdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgPyBuYXZpZ2F0b3IudXNlckFnZW50IDogdW5kZWZpbmVkLAogICAgICAgICAgcmVnaW9uOiBjb25maWcucmVnaW9uLAogICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksCiAgICAgICAgfSwKICAgICAgICBleHRyYSB8fCB7fQogICAgKTsKICAgIGRlYnVnTG9nKGNvbmZpZywgJ1NlbmQgZXZlbnQnLCBwYXlsb2FkLCB1cmwpOwogICAgY29uc3Qgc2VyaWFsaXplZCA9IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpOwogICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci5zZW5kQmVhY29uKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtzZXJpYWxpemVkXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7CiAgICAgICAgbmF2aWdhdG9yLnNlbmRCZWFjb24odXJsLCBibG9iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgd2Fybignc2VuZEJlYWNvbiBmYWlsZWQsIGZhbGxiYWNrIHRvIGZldGNoJywgZXJyb3IpOwogICAgICB9CiAgICB9CiAgICBmZXRjaCh1cmwsIHsKICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LAogICAgICBrZWVwYWxpdmU6IHRydWUsCiAgICAgIGJvZHk6IHNlcmlhbGl6ZWQsCiAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHdhcm4oJ0ZldGNoIGV2ZW50IGZhaWxlZCcsIGVycm9yKSk7CiAgfQoKICBmdW5jdGlvbiBhcHBseUFjdGlvbnMoY29uZmlnLCBhY3Rpb25zLCB2YXJpYW50SWQpIHsKICAgIGlmICghQXJyYXkuaXNBcnJheShhY3Rpb25zKSkgewogICAgICByZXR1cm47CiAgICB9CiAgICBhY3Rpb25zLmZvckVhY2goKGFjdGlvbikgPT4gewogICAgICBpZiAoIWFjdGlvbiB8fCAhYWN0aW9uLnNlbGVjdG9yKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFjdGlvbi5zZWxlY3Rvcik7CiAgICAgIGlmICghZWxlbWVudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7CiAgICAgICAgY2FzZSAndGV4dCc6CiAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gYWN0aW9uLnZhbHVlOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnaHRtbCc6CiAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGFjdGlvbi52YWx1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2F0dHJpYnV0ZSc6CiAgICAgICAgICBpZiAoYWN0aW9uLm5hbWUpIHsKICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYWN0aW9uLm5hbWUsIGFjdGlvbi52YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdzdHlsZSc6CiAgICAgICAgICBpZiAoYWN0aW9uLnByb3BlcnR5KSB7CiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGVbYWN0aW9uLnByb3BlcnR5XSA9IGFjdGlvbi52YWx1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2NsYXNzOmFkZCc6CiAgICAgICAgICBpZiAoYWN0aW9uLnZhbHVlKSB7CiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChhY3Rpb24udmFsdWUpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnY2xhc3M6cmVtb3ZlJzoKICAgICAgICAgIGlmIChhY3Rpb24udmFsdWUpIHsKICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGFjdGlvbi52YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgd2FybignVW5rbm93biBhY3Rpb24gdHlwZScsIGFjdGlvbiwgdmFyaWFudElkKTsKICAgICAgfQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBhdHRhY2hUcmFja2VkRXZlbnRzKGNvbmZpZywgZXZlbnRzLCBhc3NpZ25tZW50LCB2aXNpdG9ySWQsIHJlZ2lzdHJ5KSB7CiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXZlbnRzKSkgewogICAgICByZXR1cm47CiAgICB9CiAgICBldmVudHMuZm9yRWFjaCgoZXZlbnRDb25maWcpID0+IHsKICAgICAgaWYgKCFldmVudENvbmZpZyB8fCAhZXZlbnRDb25maWcuc2VsZWN0b3IpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZXZlbnRDb25maWcuc2VsZWN0b3IpOwogICAgICBpZiAoIWVsZW1lbnQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgZG9tRXZlbnQgPSAoZXZlbnRDb25maWcuZG9tRXZlbnQgfHwgJ2NsaWNrJykudG9Mb3dlckNhc2UoKTsKICAgICAgY29uc3QgYnVzaW5lc3NFdmVudCA9IChldmVudENvbmZpZy5ldmVudFR5cGUgfHwgJ0NMSUNLJykudG9VcHBlckNhc2UoKTsKICAgICAgY29uc3QgaGFuZGxlciA9ICgpID0+IHNlbmRFdmVudChjb25maWcsIGFzc2lnbm1lbnQsIHZpc2l0b3JJZCwgYnVzaW5lc3NFdmVudCk7CiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihkb21FdmVudCwgaGFuZGxlcik7CiAgICAgIHJlZ2lzdHJ5LnB1c2goKCkgPT4gZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGRvbUV2ZW50LCBoYW5kbGVyKSk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGRvbVJlYWR5KGNhbGxiYWNrKSB7CiAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgewogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2xvYWRpbmcnKSB7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBjYWxsYmFjaywgeyBvbmNlOiB0cnVlIH0pOwogICAgfSBlbHNlIHsKICAgICAgY2FsbGJhY2soKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGRldGVjdFJlZ2lvbihjb25maWcpIHsKICAgIGlmIChjb25maWcucmVnaW9uKSB7CiAgICAgIHJldHVybiBjb25maWcucmVnaW9uOwogICAgfQogICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0KICAgIGNvbnN0IG1ldGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJoeXBvdGVzdHMtcmVnaW9uXCJdJyk7CiAgICByZXR1cm4gbWV0YSAmJiBtZXRhLmNvbnRlbnQgPyBtZXRhLmNvbnRlbnQgOiB1bmRlZmluZWQ7CiAgfQoKICBmdW5jdGlvbiBidWlsZFB1YmxpY0FwaShzdGF0ZSwgY29uZmlnLCB2aXNpdG9ySWQsIHBsYXRmb3JtLCByZWdpb24pIHsKICAgIHJldHVybiB7CiAgICAgIHZlcnNpb246IFZFUlNJT04sCiAgICAgIHZpc2l0b3JJZCwKICAgICAgZ2V0IGFzc2lnbm1lbnQoKSB7CiAgICAgICAgcmV0dXJuIHN0YXRlLmFzc2lnbm1lbnQ7CiAgICAgIH0sCiAgICAgIGFzeW5jIHJlc2V0QXNzaWdubWVudCgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgc3RhdGUuYXNzaWdubWVudCA9IGF3YWl0IHJlcXVlc3RBc3NpZ25tZW50KGNvbmZpZywgdmlzaXRvcklkLCBwbGF0Zm9ybSwgcmVnaW9uKTsKICAgICAgICAgIGRlYnVnTG9nKGNvbmZpZywgJ0Fzc2lnbm1lbnQgcmVmcmVzaGVkJywgc3RhdGUuYXNzaWdubWVudCk7CiAgICAgICAgICBhcHBseVZhcmlhbnQoc3RhdGUsIGNvbmZpZywgdmlzaXRvcklkKTsKICAgICAgICAgIHNlbmRFdmVudChjb25maWcsIHN0YXRlLmFzc2lnbm1lbnQsIHZpc2l0b3JJZCwgJ0lNUFJFU1NJT04nKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgd2FybignRmFpbGVkIHRvIHJlYXNzaWduIHZhcmlhbnQnLCBlcnJvcik7CiAgICAgICAgfQogICAgICB9LAogICAgICB0cmFja0NvbnZlcnNpb24oZXh0cmEpIHsKICAgICAgICBpZiAoIXN0YXRlLmFzc2lnbm1lbnQpIHsKICAgICAgICAgIHdhcm4oJ0NvbnZlcnNpb24gaWdub3JlZCwgbm8gYXNzaWdubWVudCB5ZXQnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgc2VuZEV2ZW50KGNvbmZpZywgc3RhdGUuYXNzaWdubWVudCwgdmlzaXRvcklkLCAnQ09OVkVSU0lPTicsIGV4dHJhKTsKICAgICAgfSwKICAgIH07CiAgfQoKICBmdW5jdGlvbiBhcHBseVZhcmlhbnQoc3RhdGUsIGNvbmZpZywgdmlzaXRvcklkKSB7CiAgICBkb21SZWFkeSgoKSA9PiB7CiAgICAgIGlmICghc3RhdGUuYXNzaWdubWVudCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCB2YXJpYW50Q29uZmlnID0gKGNvbmZpZy52YXJpYW50cyAmJiBjb25maWcudmFyaWFudHNbc3RhdGUuYXNzaWdubWVudC52YXJpYW50SWRdKSB8fCB7fTsKICAgICAgY29uc3QgdHJhY2tlZEV2ZW50cyA9IHRvVHJhY2tlZEV2ZW50cyh2YXJpYW50Q29uZmlnKTsKICAgICAgaWYgKHN0YXRlLmRldGFjaExpc3RlbmVycy5sZW5ndGgpIHsKICAgICAgICBzdGF0ZS5kZXRhY2hMaXN0ZW5lcnMuZm9yRWFjaCgoZm4pID0+IGZuKCkpOwogICAgICAgIHN0YXRlLmRldGFjaExpc3RlbmVycyA9IFtdOwogICAgICB9CiAgICAgIGFwcGx5QWN0aW9ucyhjb25maWcsIHZhcmlhbnRDb25maWcuYWN0aW9ucywgc3RhdGUuYXNzaWdubWVudC52YXJpYW50SWQpOwogICAgICBhdHRhY2hUcmFja2VkRXZlbnRzKGNvbmZpZywgdHJhY2tlZEV2ZW50cywgc3RhdGUuYXNzaWdubWVudCwgdmlzaXRvcklkLCBzdGF0ZS5kZXRhY2hMaXN0ZW5lcnMpOwogICAgICBpZiAodHlwZW9mIHZhcmlhbnRDb25maWcub25BcHBsaWVkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhcmlhbnRDb25maWcub25BcHBsaWVkKHN0YXRlLmFzc2lnbm1lbnQsIGNvbmZpZywgdmlzaXRvcklkKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgd2FybignVmFyaWFudCBvbkFwcGxpZWQgdGhyZXcgYW4gZXJyb3InLCBlcnJvcik7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICB9CgogIGFzeW5jIGZ1bmN0aW9uIGJvb3RzdHJhcCgpIHsKICAgIGNvbnN0IGNvbmZpZyA9IG1lcmdlQ29uZmlnKCk7CiAgICBpZiAoIWNvbmZpZy5leHBlcmltZW50SWQpIHsKICAgICAgd2FybignZXhwZXJpbWVudElkIGlzIG5vdCBjb25maWd1cmVkJyk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCB2aXNpdG9ySWQgPSByZXNvbHZlVmlzaXRvcklkKCk7CiAgICBjb25zdCBwbGF0Zm9ybSA9IGNvbmZpZy5wbGF0Zm9ybSB8fCBkZXRlY3RQbGF0Zm9ybSgpOwogICAgY29uc3QgcmVnaW9uID0gZGV0ZWN0UmVnaW9uKGNvbmZpZyk7CiAgICBjb25maWcucGxhdGZvcm0gPSBwbGF0Zm9ybTsKICAgIGlmIChyZWdpb24pIHsKICAgICAgY29uZmlnLnJlZ2lvbiA9IHJlZ2lvbjsKICAgIH0KCiAgICBjb25zdCBzdGF0ZSA9IHsKICAgICAgYXNzaWdubWVudDogbnVsbCwKICAgICAgZGV0YWNoTGlzdGVuZXJzOiBbXSwKICAgIH07CgogICAgY29uc3QgcHVibGljQXBpID0gYnVpbGRQdWJsaWNBcGkoc3RhdGUsIGNvbmZpZywgdmlzaXRvcklkLCBwbGF0Zm9ybSwgcmVnaW9uKTsKICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgewogICAgICB3aW5kb3cuaHlwb3Rlc3RzID0gcHVibGljQXBpOwogICAgfQoKICAgIHRyeSB7CiAgICAgIHN0YXRlLmFzc2lnbm1lbnQgPSBhd2FpdCByZXF1ZXN0QXNzaWdubWVudChjb25maWcsIHZpc2l0b3JJZCwgcGxhdGZvcm0sIHJlZ2lvbik7CiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBBcnJheS5pc0FycmF5KHdpbmRvdy5kYXRhTGF5ZXIpKSB7CiAgICAgICAgd2luZG93LmRhdGFMYXllci5wdXNoKHsKICAgICAgICAgIGV2ZW50OiAnaHlwb3Rlc3RzX2Fzc2lnbm1lbnQnLAogICAgICAgICAgZXhwZXJpbWVudElkOiBzdGF0ZS5hc3NpZ25tZW50LmV4cGVyaW1lbnRJZCwKICAgICAgICAgIHZhcmlhbnRJZDogc3RhdGUuYXNzaWdubWVudC52YXJpYW50SWQsCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgYXBwbHlWYXJpYW50KHN0YXRlLCBjb25maWcsIHZpc2l0b3JJZCk7CiAgICAgIHNlbmRFdmVudChjb25maWcsIHN0YXRlLmFzc2lnbm1lbnQsIHZpc2l0b3JJZCwgJ0lNUFJFU1NJT04nKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIHdhcm4oJ0ZhaWxlZCB0byBhc3NpZ24gdmFyaWFudCcsIGVycm9yKTsKICAgIH0KICB9CgogIGJvb3RzdHJhcCgpOwp9KSgpOwo=';
  var decode = typeof window !== 'undefined' && window.atob ? window.atob : (typeof atob === 'function' ? atob : null);
  if (!decode) { throw new Error('Base64 decoder is not available in this environment'); }
  var decoded = decode(bundle);
  (new Function(decoded))();
})();
</script>
    <script>
      const btn = document.getElementById('cta');
      btn.addEventListener('click', () => {
        btn.classList.toggle('red');
      });
    </script>
   </body>
</html>
